<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Tirana â€” Extended Map (Visit-Tirana descriptions)</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  body { margin:0; padding:0; font-family: Arial, sans-serif; }
  #map { height: 100vh; width: 100%; }
  .loc-button {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 8px 10px;
    background: white;
    border: 1px solid #aaa;
    cursor: pointer;
    z-index: 1000;
  }
  .legend-note { position: absolute; left: 10px; bottom: 10px; background: rgba(255,255,255,0.9); padding:8px; border-radius:6px; font-size:13px; z-index:1000; }
</style>
</head>
<body>

<div id="map"></div>
<button class="loc-button" onclick="locateUser()">ğŸ“ My Location</button>
<div class="legend-note">Markers colored by category. Toggle layers at top-right.</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
var map = L.map('map').setView([41.32833, 19.81833], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: 'Â© OpenStreetMap'
}).addTo(map);

// Helper to load colored marker icons
function icon(color) {
  return L.icon({
    iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${color}.png`,
    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
    iconSize: [25,41],
    iconAnchor: [12,41]
  });
}

var icons = {
  sightseeing: icon("red"),
  monuments: icon("orange"),
  museum: icon("violet"),
  gallery: icon("purple"),
  food: icon("green"),
  nature: icon("blue"),
  daytrip: icon("yellow"),
  activities: icon("grey")
};

// Create layer groups (toggleable)
var layers = {
  "ğŸ› Sightseeing": L.layerGroup(),
  "ğŸ“œ Monuments & Cultural Sites": L.layerGroup(),
  "ğŸ–¼ Museums": L.layerGroup(),
  "ğŸ–¼ Galleries": L.layerGroup(),
  "ğŸ½ Food & Nightlife": L.layerGroup(),
  "ğŸŒ¿ Nature & Views": L.layerGroup(),
  "ğŸš— Day Trips": L.layerGroup(),
  "ğŸ² Activities & Entertainment": L.layerGroup()
};

// Places with short descriptions (sourced from Visit-Tirana where available)
var places = [
  // Sightseeing
  ["Skanderbeg Square",41.32833,19.81833,"Central plaza dominated by the 11-metre Skanderbeg statue; the square is surrounded by the National Historical Museum, Palace of Culture and other main civic buildings." ,"sightseeing"],
  ["The Pyramid of Tirana",41.32341,19.82125,"Controversial modernist landmark â€” now a cultural hub and evening meeting point; symbol of the city's recent transformations.","sightseeing"],
  ["Tirana Castle (Justinian Fortress)",41.32639,19.82194,"Remnants of the old fortress â€” small cultural and dining quarter near the historic centre.","sightseeing"],
  ["Tanners' Bridge",41.32890,19.82150,"18th-century Ottoman stone footbridge â€” a charming historic stroll spot in the city centre.","sightseeing"],

  // Monuments & Cultural Sites
  ["Skanderbeg Monument",41.3280,19.8180,"Monument to Albaniaâ€™s national hero; central meeting point in Skanderbeg Square and focal point for events.","monuments"],
  ["Grand Mosque / Namazgah Mosque",41.3290,19.8170,"The Grand Mosque (Namazgah) is one of Tiranaâ€™s major religious landmarks and an example of modern mosque architecture.","monuments"],
  ["Sali Shijakuâ€™s Villa",41.3268,19.8195,"Historic villa of painter Sali Shijaku â€” notable cultural site referenced on Visit-Tirana.","monuments"],
  ["Reja (Cloud) Art Installation",41.3245,19.8190,"Large contemporary public art installation near the art gallery â€” notable urban artwork.","monuments"],

  // Museums
  ["National Historical Museum",41.3279,19.8186,"Tiranaâ€™s largest museum: objects and stories from prehistory through the communist period â€” a must for history buffs.","museum"],
  ["House of Leaves (Museum of Secret Surveillance)",41.32347,19.82040,"Former secret-police HQ turned museum â€” holds files, devices and exhibitions on surveillance during the dictatorship.","museum"],
  ["Bunk'Art 2",41.32708,19.81955,"Cold-war bunker in the city centre transformed into a museum exploring Albaniaâ€™s 20th-century history.","museum"],
  ["Bunk'Art 1",41.351686,19.860733,"Large underground bunker museum on the outskirts illustrating recent history and contemporary art exhibitions.","museum"],
  ["National Archaeological Museum",41.3192,19.8200,"Museum of archaeological finds from prehistoric times through later eras; located near Mother Teresa Square.","museum"],
  ["Museum of Natural Sciences (Sabiha Kasimati)",41.3267,19.8175,"Displays in zoology, botany and geology â€” family-friendly natural history exhibits.","museum"],
  ["Ismail Kadare House Museum",41.3289,19.8235,"House museum dedicated to the famous Albanian novelist Ismail Kadare.","museum"],
  ["Womenâ€™s Museum",41.3235,19.8220,"Exhibits telling the story of Albanian women through events and personal stories.","museum"],
  ["Museum of the Bank of Albania",41.3270,19.8190,"Museum presenting the history and collection of the Bank of Albania.","museum"],
  ["The Armed Forces Museum",41.3305,19.8350,"New large museum chronicling Albaniaâ€™s military history (opened recently).","museum"],

  // Galleries
  ["Albanian Post Gallery",41.3234,19.8270,"Gallery focused on Albanian philately and stamp history â€” cultural micro-museum noted on Visit-Tirana.","gallery"],
  ["National Gallery of Arts",41.32546,19.82021,"Displays Albanian modern and traditional art; frequent temporary exhibitions.","gallery"],

  // Food & Nightlife
  ["Blloku District",41.32111,19.81694,"Trendy area of cafes, bars and restaurants â€” Tiranaâ€™s nightlife hub once restricted to the communist elite.","food"],
  ["Pazari i Ri (New Bazaar)",41.32925,19.82521,"Vibrant market with fresh produce, eateries and people-watching â€” great for lunch or a snack.","food"],
  ["Mullixhiu Restaurant",41.3229,19.8231,"Well-known spot for modern interpretations of Albanian cuisine.","food"],
  ["Colorwine",41.3220,19.8190,"Popular wine tasting bar recommended by locals and guides.","food"],

  // Nature & Views
  ["Grand Park & Artificial Lake",41.311855,19.820967,"Large urban park with an artificial lake, walking paths and relaxed green spaces.","nature"],
  ["Botanical Garden of Tirana",41.3157,19.8069,"Botanical collections and quiet green areas near the city park.","nature"],
  ["Dajti Ekspres Cable Car",41.37664,19.92117,"Cable car to Mount Dajti offering panoramic views, restaurants and mountain trails.","nature"],
  ["Dajti Adventure Park",41.3825,19.9260,"Outdoor adventure park on Mount Dajti with treetop trails and activities (recommended day outing).","nature"],

  // Day trips
  ["KrujÃ« Fortress & Bazaar",41.5078,19.7950,"Historic Skanderbeg stronghold with crafts bazaar â€” classic day trip from Tirana.","daytrip"],
  ["DurrÃ«s Amphitheatre",41.3240,19.4410,"Roman amphitheatre in the coastal city of DurrÃ«s â€” combine with a beach visit.","daytrip"],
  ["Berat (UNESCO) (day trip)",40.7066,19.9526,"UNESCO city known as the 'City of a Thousand Windows' â€” longer but rewarding day trip.","daytrip"],
  ["Apollonia Archaeological Park",40.72333,19.58333,"Ancient Greek-Roman ruins outside Tirana for a more archaeological day trip.","daytrip"],
  ["Cape of Rodon (Kepi i Rodonit)",41.5678,19.5900,"Scenic coastal area with castle ruins â€” a scenic escape from the capital.","daytrip"],

  // Activities & Entertainment
  ["Tirana Escape Room",41.3260,19.8185,"Live puzzle rooms for groups â€” a fun indoor activity for friends or family.","activities"],
  ["TEG Entertainment Complex",41.3280,19.8280,"Large entertainment complex with cinema, bowling and family activities.","activities"],
  ["QTU Entertainment Complex",41.3300,19.8270,"Indoor entertainment and shopping complex with cinema and games.","activities"]
];

// Add markers to corresponding layer groups
places.forEach(function(p) {
  var catKey = (
    p[4]=="sightseeing" ? "ğŸ› Sightseeing" :
    p[4]=="monuments" ? "ğŸ“œ Monuments & Cultural Sites" :
    p[4]=="museum" ? "ğŸ–¼ Museums" :
    p[4]=="gallery" ? "ğŸ–¼ Galleries" :
    p[4]=="food" ? "ğŸ½ Food & Nightlife" :
    p[4]=="nature" ? "ğŸŒ¿ Nature & Views" :
    p[4]=="daytrip" ? "ğŸš— Day Trips" :
    "ğŸ² Activities & Entertainment"
  );
  var markerIcon = icons[p[4]] || icons["sightseeing"];
  var m = L.marker([p[1], p[2]], {icon: markerIcon})
    .bindPopup("<b>" + p[0] + "</b><br/>" + p[3]);
  layers[catKey].addLayer(m);
});

// Add all layers to the map and a layer control
Object.values(layers).forEach(function(l){ l.addTo(map); });
L.control.layers(null, layers).addTo(map);

// Geolocation
var userMarker;
function locateUser() {
  if (!navigator.geolocation) { alert("Geolocation not supported by your browser."); return; }
  navigator.geolocation.getCurrentPosition(function(pos) {
    var lat = pos.coords.latitude, lon = pos.coords.longitude;
    if (userMarker) map.removeLayer(userMarker);
    userMarker = L.circleMarker([lat,lon], {radius:8, color:"#007bff", fillOpacity:0.8})
      .addTo(map).bindPopup("You are here").openPopup();
    map.setView([lat,lon],14);
  }, function(err){
    alert("Unable to retrieve location: " + err.message);
  }, { enableHighAccuracy: true, timeout: 10000 });
}
</script>
</body>
</html>
