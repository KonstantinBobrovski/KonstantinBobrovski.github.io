<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Skopje ‚Äî Extended Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css">

<style>
body { margin:0; padding:0; font-family:Arial,sans-serif; }
#map { height:100vh; width:100%; }
.loc-button {
  position:absolute; top:10px; right:10px;
  padding:8px 10px; background:white;
  border:1px solid #aaa; cursor:pointer; z-index:1000;
}
.legend-note {
  position:absolute; left:10px; bottom:10px;
  background:rgba(255,255,255,0.9);
  padding:8px; border-radius:6px;
  font-size:13px; z-index:1000;
}
</style>
</head>

<body>

<div id="map"></div>
<button class="loc-button" onclick="locateUser()">üìç My Location</button>
<div class="legend-note">Markers grouped by category. Toggle layers top-right.</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

<script>
// MAP
var map = L.map('map');
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom:19, attribution:'¬© OpenStreetMap'
}).addTo(map);

// ICONS
function icon(color){
  return L.icon({
    iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${color}.png`,
    shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
    iconSize:[25,41], iconAnchor:[12,41]
  });
}

var icons = {
  sightseeing:icon("red"),
  monuments:icon("orange"),
  museum:icon("violet"),
  gallery:icon("purple"),
  food:icon("green"),
  nature:icon("blue"),
  daytrip:icon("yellow"),
  activities:icon("grey")
};

// LAYERS
var layers = {
  "üìú Monuments & Cultural Sites":L.markerClusterGroup(),
  "üñº Museums":L.markerClusterGroup(),
  "üñº Galleries":L.markerClusterGroup(),
  "üçΩ Food & Nightlife":L.markerClusterGroup(),
  "üåø Nature & Views":L.markerClusterGroup(),
  "üöó Day Trips":L.markerClusterGroup(),
  "üé≤ Activities & Entertainment":L.markerClusterGroup()
};

// CATEGORY MAP
var CATEGORY_MAP = {
  "Monuments & Cultural Sites":{layer:"üìú Monuments & Cultural Sites",icon:"monuments"},
  "Historic Buildings":{layer:"üìú Monuments & Cultural Sites",icon:"monuments"},
  "Architecture":{layer:"üìú Monuments & Cultural Sites",icon:"monuments"},
  "Religion":{layer:"üìú Monuments & Cultural Sites",icon:"monuments"},
  "Religion & Cultural Sites":{layer:"üìú Monuments & Cultural Sites",icon:"monuments"},
  "Museums":{layer:"üñº Museums",icon:"museum"},
  "Museums & Galleries":{layer:"üñº Museums",icon:"museum"},
  "Galleries":{layer:"üñº Galleries",icon:"gallery"},
  "Food & Nightlife":{layer:"üçΩ Food & Nightlife",icon:"food"},
  "Nature & Outdoors":{layer:"üåø Nature & Views",icon:"nature"},
  "Landmarks & Viewpoints":{layer:"üåø Nature & Views",icon:"nature"},
  "Day Trips":{layer:"üöó Day Trips",icon:"daytrip"},
  "Family Activities":{layer:"üé≤ Activities & Entertainment",icon:"activities"},
  "Interactive Museums":{layer:"üé≤ Activities & Entertainment",icon:"activities"}
};

// PLACES (FULL LIST + Cathedral added)
var places = [
  {
    name:"–°–æ–±–æ—Ä –°–≤—è—Ç–æ–≥–æ –ö–ª–∏–º–µ–Ω—Ç–∞ (Cathedral of St. Clement of Ohrid)",
    description:"Large modern Orthodox cathedral dedicated to St. Clement of Ohrid ‚Äî one of Skopje‚Äôs most important religious landmarks.",
    categories:["Religion"],
    location:{lat:41.9929,lon:21.4255},
    sources:["https://en.wikipedia.org/wiki/Cathedral_of_St._Clement_of_Ohrid"]
  },
  {
    name:"Skopje Fortress (Kale)",
    description:"Historic hilltop fortress with panoramic views over the city.",
    categories:["Monuments & Cultural Sites"],
    location:{lat:42.00097,lon:21.43225},
    sources:["https://en.wikipedia.org/wiki/Skopje_Fortress"]
  },
  {
    name:"Old Bazaar (Stara ƒåar≈°ija)",
    description:"Historic Ottoman bazaar district with narrow alleys, shops and caf√©s.",
    categories:["Monuments & Cultural Sites"],
    location:{lat:42.00076,lon:21.43696},
    sources:["https://en.wikipedia.org/wiki/Old_Bazaar,_Skopje"]
  },
  {
    name:"Stone Bridge (Kameni Most)",
    description:"15th-century stone bridge connecting Macedonia Square to the Old Bazaar.",
    categories:["Monuments & Cultural Sites"],
    location:{lat:41.99699,lon:21.43307},
    sources:["https://en.wikipedia.org/wiki/Stone_Bridge_(Skopje)"]
  },
  {
    name:"Macedonia Square",
    description:"Main central square of Skopje with statues and fountains.",
    categories:["Monuments & Cultural Sites"],
    location:{lat:41.9959,lon:21.43145},
    sources:["https://en.wikipedia.org/wiki/Macedonia_Square,_Skopje"]
  },
  {
    name:"Memorial House of Mother Teresa",
    description:"Museum dedicated to Mother Teresa, who was born in Skopje.",
    categories:["Museums"],
    location:{lat:41.99389,lon:21.43083},
    sources:["https://en.wikipedia.org/wiki/Memorial_House_of_Mother_Teresa"]
  },
  {
    name:"Matka Canyon",
    description:"Dramatic canyon west of Skopje with hiking, caves and boat trips.",
    categories:["Nature & Outdoors","Day Trips"],
    location:{lat:41.93016,lon:21.29227},
    sources:["https://en.wikipedia.org/wiki/Matka_Canyon"]
  },
  {
    name:"Millennium Cross (Mount Vodno)",
    description:"66-metre steel cross with sweeping views over Skopje.",
    categories:["Landmarks & Viewpoints"],
    location:{lat:41.96529,lon:21.39462},
    sources:["https://en.wikipedia.org/wiki/Millennium_Cross"]
  },
  
  {  
    "name": "Skopje Fortress (Kale)",  
    "description": "Historic hilltop fortress with panoramic views over the old town and Vardar River ‚Äî a good photo stop and short walk. Traces from Byzantine to Ottoman eras.",  
    "categories": ["Monuments & Cultural Sites", "Viewpoints"],  
    "location": { "lat": 42.00097, "lon": 21.43225 },  
    "sources": ["https://en.wikipedia.org/wiki/Skopje_Fortress"]  
  },  
  {  
    "name": "Old Bazaar (Stara ƒåar≈°ija)",  
    "description": "Large historic Ottoman bazaar district with narrow alleys, artisan shops, mosques, caf√©s and traditional markets ‚Äî great for exploring and buying souvenirs.",  
    "categories": ["Markets & Shopping", "Cultural Sites"],  
    "location": { "lat": 42.00076, "lon": 21.43696 },  
    "sources": ["https://en.wikipedia.org/wiki/Old_Bazaar%2C_Skopje"]  
  },  
  {  
    "name": "Stone Bridge (Kameni Most)",  
    "description": "15th-century stone bridge crossing the Vardar River that connects Macedonia Square to the Old Bazaar ‚Äî Skopje's iconic symbol.",  
    "categories": ["Monuments & Cultural Sites", "Architecture"],  
    "location": { "lat": 41.99699, "lon": 21.43307 },  
    "sources": ["https://en.wikipedia.org/wiki/Stone_Bridge_(Skopje)"]  
  },  
  {  
    "name": "Macedonia Square & \"Warrior on a Horse\" (Alexander statue)",  
    "description": "Main central square with fountains and large statues (the towering equestrian 'Warrior on a Horse') ‚Äî hub for events and a starting point for city walks.",  
    "categories": ["Public Squares & Monuments", "City Life"],  
    "location": { "lat": 41.99590, "lon": 21.43145 },  
    "sources": ["https://en.wikipedia.org/wiki/Macedonia_Square%2C_Skopje", "https://en.wikipedia.org/wiki/Warrior_on_Horseback"]  
  },  
  {  
    "name": "Memorial House of Mother Teresa",  
    "description": "Small museum and memorial dedicated to Mother Teresa (born in Skopje) with exhibits on her life and humanitarian work.",  
    "categories": ["Museums", "Religion & Biography"],  
    "location": { "lat": 41.99389, "lon": 21.43083 },  
    "sources": ["https://en.wikipedia.org/wiki/Memorial_House_of_Mother_Teresa"]  
  },  
  {  
    "name": "Archaeological Museum of North Macedonia",  
    "description": "Large archaeological collection tracing Macedonia's prehistoric, classical and medieval past ‚Äî useful context before deeper city exploration.",  
    "categories": ["Museums", "History & Archaeology"],  
    "location": { "lat": 41.99684, "lon": 21.43446 },  
    "sources": ["https://www.outdooractive.com/mobile/en/poi/western-balkans/archaeological-museum-of-macedonia/807634059/"]  
  },  
  {  
    "name": "Museum of the City of Skopje (Old Railway Station)",  
    "description": "Museum of local history housed in the partially preserved pre-1963 earthquake railway station ‚Äî covers Skopje's urban story from ancient to modern times.",  
    "categories": ["Museums", "Local History"],  
    "location": { "lat": 41.99660, "lon": 21.43350 },  
    "sources": ["https://app.ar-tour.com/guides/skopje-guide-in-development/museum-of-the-city-of-skopje.aspx"]  
  },  
  {  
    "name": "Holocaust Memorial Center for the Jews of Macedonia",  
    "description": "Multimedia memorial documenting the history and fate of Macedonia's Jewish community during WWII ‚Äî important, moving visit.",  
    "categories": ["Museums", "Memorials & History"],  
    "location": { "lat": 41.99856, "lon": 21.43365 },  
    "sources": ["https://en.wikipedia.org/wiki/Holocaust_Memorial_Center_for_the_Jews_of_Macedonia"]  
  },  
  {  
    "name": "ƒåifte Hammam (National Gallery branch)",  
    "description": "Ottoman-era bathhouse in the Old Bazaar converted into exhibition space and gallery ‚Äî good for short contemporary/visual art stops.",  
    "categories": ["Museums & Galleries", "Historic Buildings"],  
    "location": { "lat": 42.00111, "lon": 21.43722 },  
    "sources": ["https://nationalgallery.mk/cifte-amammk/"]  
  },  
  {  
    "name": "Mustafa Pasha Mosque",  
    "description": "Elegant 15th-century Ottoman mosque that dominates the Old Bazaar skyline ‚Äî architectural highlight within the market quarter.",  
    "categories": ["Religion & Monuments", "Architecture"],  
    "location": { "lat": 42.00117, "lon": 21.43458 },  
    "sources": ["https://www.archnet.org/sites/6818"]  
  },  
  {  
    "name": "Porta Macedonia (triumphal arch)",  
    "description": "Modern triumphal arch commissioned as part of Skopje 2014 project ‚Äî photo stop and landmark on Pella Square.",  
    "categories": ["Monuments & Cultural Sites", "Public Art"],  
    "location": { "lat": 41.99445, "lon": 21.43243 },  
    "sources": ["https://en.wikipedia.org/wiki/Porta_Macedonia"]  
  },  
  {  
    "name": "Skopje Aqueduct (Vizbegovo)",  
    "description": "Rare, well-preserved stone aqueduct northwest of central Skopje ‚Äî interesting archaeological structure that many visitors miss.",  
    "categories": ["Archaeological Sites", "Monuments"],  
    "location": { "lat": 42.02352, "lon": 21.41873 },  
    "sources": ["https://en.wikipedia.org/wiki/Skopje_Aqueduct"]  
  },  
  {  
    "name": "Matka Canyon & Vrelo Cave",  
    "description": "Dramatic canyon west of Skopje with lake, boat trips to Vrelo cave, kayaking, hiking and multiple small monasteries ‚Äî top half-day or full-day nature escape.",  
    "categories": ["Nature & Outdoors", "Caves & Boat Trips"],  
    "location": { "lat": 41.93016, "lon": 21.29227 },  
    "sources": ["https://en.wikipedia.org/wiki/Matka_Canyon", "https://showcaves.com/english/mk/showcaves/Vrelo.html"]  
  },  
  {  
    "name": "St. Andrew's Monastery (Matka)",  
    "description": "14th-century monastery tucked into Matka Canyon with frescoes ‚Äî an atmospheric stop reachable by short boat ride/hike.",  
    "categories": ["Religion & Cultural Sites", "Historic Monasteries"],  
    "location": { "lat": 41.95270, "lon": 21.29810 },  
    "sources": ["https://en.wikipedia.org/wiki/St._Andrew%27s_Monastery_(Matka)"]  
  },  
  {  
    "name": "Church of St. Panteleimon (Gorno Nerezi)",  
    "description": "12th-century Byzantine church on the slopes of Vodno with exquisite medieval frescoes ‚Äî a short drive/hike from the city.",  
    "categories": ["Religion & Cultural Sites", "Byzantine Art"],  
    "location": { "lat": 41.97700, "lon": 21.37400 },  
    "sources": ["https://en.wikipedia.org/wiki/Church_of_Saint_Panteleimon%2C_Gorno_Nerezi"]  
  },  
  {  
    "name": "Millennium Cross (Mount Vodno)",  
    "description": "66-metre steel cross on Vodno mountain with sweeping city views; the cable car (ropeway) is a visitor-friendly way to reach it.",  
    "categories": ["Landmarks & Viewpoints", "Experiences"],  
    "location": { "lat": 41.96529, "lon": 21.39462 },  
    "sources": ["https://en.wikipedia.org/wiki/Millennium_Cross", "https://skopjebus.mk/en/zhichnica/"]  
  },  
  {  
    "name": "Vodno Cable Car (≈Ωiƒçnica) ‚Äî Sredno Vodno ‚Üî Millenium Cross",  
    "description": "Short cable-car ride offering panoramic views and fast access between Sredno Vodno and the Millennium Cross ‚Äî pleasant experience, especially at sunset.",  
    "categories": ["Experiences", "Transport & Viewpoints"],  
    "location": { "lat": 41.96650, "lon": 21.39700 },  
    "sources": ["https://skopjebus.mk/en/zhichnica/", "https://onesmallbag.com/millennium-cross-skopje-mount-vodno-by-bus/"]  
  },  
  {  
    "name": "Skopje Zoo & City Park",  
    "description": "12-hectare zoo located next to the large City Park ‚Äî family-friendly and a relaxed green stop inside the city.",  
    "categories": ["Parks & Zoos", "Family Activities"],  
    "location": { "lat": 42.00708, "lon": 21.41687 },  
    "sources": ["https://en.wikipedia.org/wiki/Skopje_Zoo"]  
  },  
  {  
    "name": "Macedonian Museum of Natural History",  
    "description": "Local natural history collections showing regional fauna, flora, geology and biodiversity ‚Äî useful for quick indoor stops on rainy days.",  
    "categories": ["Museums", "Natural History"],  
    "location": { "lat": 42.00571, "lon": 21.41744 },  
    "sources": ["https://aroundus.com/p/164548505-macedonian-museum-of-natural-history"]  
  },  
  {  
    "name": "Bit Pazar (Open Market)",  
    "description": "Bustling open market area near the Old Bazaar selling produce, clothing and daily goods ‚Äî lively spot to watch local life and try street food.",  
    "categories": ["Markets & Shopping", "Local Life"],  
    "location": { "lat": 42.00361, "lon": 21.43917 },  
    "sources": ["https://wikimapia.org/121724/Bit-Pazar"]  
  },  
  {  
    "name": "Museum of the Macedonian Struggle (Museum of VMRO)",  
    "description": "Modern museum dedicated to 19th‚Äì20th century political history and independence movements ‚Äî strong modern-history content.",  
    "categories": ["Museums", "History & Politics"],  
    "location": { "lat": 41.99810, "lon": 21.43310 },  
    "sources": ["https://en.wikipedia.org/wiki/Museum_of_the_Macedonian_Struggle_%28Skopje%29"]  
  },  
  {  
    "name": "Museum of Contemporary Art (Skopje)",  
    "description": "National contemporary art collection (international & Macedonian artists) ‚Äî housed in a modern building near the fortress area.",  
    "categories": ["Museums & Galleries", "Contemporary Art"],  
    "location": { "lat": 42.00401, "lon": 21.43292 },  
    "sources": ["https://msu.mk/home/"]  
  },  
  {  
    "name": "Kokino Megalithic Observatory (day trip)",  
    "description": "Bronze-Age megalithic observatory (UNESCO tentative) with carved rock markers used to track the sun and moon ‚Äî archaeological day-trip northeast of Skopje.",  
    "categories": ["Archaeological Sites", "Day Trips"],  
    "location": { "lat": 42.26306, "lon": 21.95889 },  
    "sources": ["https://en.wikipedia.org/wiki/Kokino", "https://whc.unesco.org/en/tentativelists/5413/"]  
  },  
  {  
    "name": "Stobi Archaeological Site (day trip)",  
    "description": "Large ancient Roman/Byzantine city with mosaics and basilicas ‚Äî south of Skopje, excellent if you want an archaeological full-day trip.",  
    "categories": ["Archaeological Sites", "Day Trips"],  
    "location": { "lat": 41.55320, "lon": 21.97579 },  
    "sources": ["https://en.wikipedia.org/wiki/Stobi"]  
  },  
  {  
    "name": "Tetovo ‚Äî Painted (≈†arena) Mosque & Arabati Baba Tekke (short trip)",  
    "description": "Tetovo's richly painted '≈†arena' (Painted) Mosque and the Bektashi Arabati Baba Tekke are excellent cultural stops ~40‚Äì50 km from Skopje (easy by car or bus).",  
    "categories": ["Religion & Cultural Sites", "Day Trips"],  
    "location": { "lat": 42.00619, "lon": 20.95968 },  
    "sources": ["https://en.wikipedia.org/wiki/%C5%A0arena_Mosque", "https://en.wikipedia.org/wiki/Arabati_Baba_Te%EF%B8%BD%EF%B8%BDe"]  
  },  
  {  
    "name": "Skopje City Park (Gradski Park)",  
    "description": "The largest green space in the city with walking paths, caf√©s, monuments and lakes ‚Äî popular with locals for relaxation and evening strolls.",  
    "categories": ["Parks & Green Spaces", "City Life"],  
    "location": { "lat": 42.00550, "lon": 21.42030 },  
    "sources": ["https://en.wikipedia.org/wiki/City_Park,_Skopje"]  
  },  
  {  
    "name": "Macedonian Philharmonic Hall",  
    "description": "Modern concert hall hosting classical music performances and international guest orchestras ‚Äî architectural and cultural highlight.",  
    "categories": ["Music & Performing Arts", "Modern Architecture"],  
    "location": { "lat": 41.99820, "lon": 21.43490 },  
    "sources": ["https://en.wikipedia.org/wiki/Macedonian_Philharmonic"]  
  },  
  {  
    "name": "National Opera and Ballet (MOB)",  
    "description": "Main venue for opera, ballet and classical performances in Skopje, known for its distinctive post-earthquake modernist architecture.",  
    "categories": ["Music & Performing Arts", "Cultural Institutions"],  
    "location": { "lat": 41.99885, "lon": 21.43670 },  
    "sources": ["https://en.wikipedia.org/wiki/Macedonian_Opera_and_Ballet"]  
  },  
  {  
    "name": "Daut Pasha Hammam (National Gallery)",  
    "description": "15th-century Ottoman bathhouse converted into an art gallery ‚Äî atmospheric interior with domes and rotating exhibitions.",  
    "categories": ["Museums & Galleries", "Historic Buildings"],  
    "location": { "lat": 42.00165, "lon": 21.43630 },  
    "sources": ["https://en.wikipedia.org/wiki/Daut_Pasha_Hammam"]  
  },  
  {  
    "name": "Kapan Han",  
    "description": "Historic Ottoman caravanserai in the Old Bazaar that once hosted merchants and traders ‚Äî today surrounded by caf√©s and galleries.",  
    "categories": ["Historic Buildings", "Cultural Sites"],  
    "location": { "lat": 42.00090, "lon": 21.43760 },  
    "sources": ["https://en.wikipedia.org/wiki/Kapan_Han"]  
  },  
  {  
    "name": "Suli An (Faculty of Fine Arts / Gallery)",  
    "description": "Former caravanserai now housing art studios and exhibitions ‚Äî a quieter cultural corner of the Old Bazaar.",  
    "categories": ["Museums & Galleries", "Historic Buildings"],  
    "location": { "lat": 42.00040, "lon": 21.43820 },  
    "sources": ["https://en.wikipedia.org/wiki/Suli_An"]  
  },  
  {  
    "name": "Clock Tower (Saat Kula)",  
    "description": "Ottoman-era clock tower rising above the Old Bazaar area ‚Äî historic urban landmark and orientation point.",  
    "categories": ["Monuments & Cultural Sites", "Architecture"],  
    "location": { "lat": 42.00220, "lon": 21.43880 },  
    "sources": ["https://en.wikipedia.org/wiki/Saat_Kula,_Skopje"]  
  },  
  {  
    "name": "Skopje Art Bridge",  
    "description": "Pedestrian bridge decorated with statues of notable Macedonian artists, connecting the Old Bazaar area with the modern city center.",  
    "categories": ["Public Art", "Architecture"],  
    "location": { "lat": 41.99810, "lon": 21.43530 },  
    "sources": ["https://en.wikipedia.org/wiki/Art_Bridge,_Skopje"]  
  },  
  {  
    "name": "Museum of Illusions Skopje",  
    "description": "Interactive museum featuring optical illusions and hands-on exhibits ‚Äî fun, short visit suitable for families and casual tourists.",  
    "categories": ["Interactive Museums", "Family Activities"],  
    "location": { "lat": 41.99630, "lon": 21.43260 },  
    "sources": ["https://museumofillusions.mk/"]  
  },  
  {  
    "name": "Debar Maalo Neighborhood",  
    "description": "Lively central neighborhood known for restaurants, bars and caf√©s ‚Äî best area to experience Skopje nightlife and modern local cuisine.",  
    "categories": ["Neighborhoods", "Food & Nightlife"],  
    "location": { "lat": 41.99870, "lon": 21.41750 },  
    "sources": ["https://en.wikipedia.org/wiki/Debar_Maalo"]  
  }  
]  ;

// POPUPS
function popupContent(p){
  var links=(p.sources||[]).map(s=>`<a href="${s}" target="_blank">source</a>`).join(" ‚Ä¢ ");
  return `<b>${p.name}</b><br>${p.description}<br>${links}`;
}

// MARKERS
var bounds=L.latLngBounds([]);
places.forEach(function(p){
  var marker=L.marker([p.location.lat,p.location.lon],{icon:icons.sightseeing})
    .bindPopup(popupContent(p));
  bounds.extend([p.location.lat,p.location.lon]);

  p.categories.forEach(function(cat){
    var cfg=CATEGORY_MAP[cat];
    if(!cfg)return;
    marker.setIcon(icons[cfg.icon]||icons.sightseeing);
    if(cfg.layer==="üöó Day Trips") marker.setZIndexOffset(-1000);
    layers[cfg.layer].addLayer(marker);
  });
});

// ADD LAYERS
Object.values(layers).forEach(l=>map.addLayer(l));
L.control.layers(null,layers).addTo(map);
if(bounds.isValid()) map.fitBounds(bounds.pad(0.1));

// LAYER PERSISTENCE
var saved=JSON.parse(localStorage.getItem("layers")||"[]");
if(saved.length){
  Object.entries(layers).forEach(([k,l])=>{
    if(!saved.includes(k)) map.removeLayer(l);
  });
}
map.on("overlayadd overlayremove",function(){
  var active=Object.keys(layers).filter(k=>map.hasLayer(layers[k]));
  localStorage.setItem("layers",JSON.stringify(active));
});

// GEOLOCATION
var userMarker;
function locateUser(){
  if(!navigator.geolocation) return alert("Geolocation not supported.");
  navigator.geolocation.getCurrentPosition(function(pos){
    var lat=pos.coords.latitude,lon=pos.coords.longitude;
    if(userMarker) map.removeLayer(userMarker);
    userMarker=L.circleMarker([lat,lon],{radius:8,color:"#007bff",fillOpacity:0.8})
      .addTo(map).bindPopup("You are here").openPopup();
    map.setView([lat,lon],14);
  });
}
</script>
</body>
</html>
