<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Tirana Map ‚Äì Categorized Attractions</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  body { margin:0; padding:0; font-family: Arial, sans-serif; }
  #map { height: 100vh; width: 100%; }
  .loc-button {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 8px 10px;
    background: white;
    border: 1px solid #aaa;
    cursor: pointer;
    z-index: 1000;
  }
</style>
</head>
<body>

<div id="map"></div>
<button class="loc-button" onclick="locateUser()">üìç My Location</button>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
var map = L.map('map').setView([41.32833, 19.81833], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '¬© OpenStreetMap'
}).addTo(map);

// Marker icons by category
function icon(color) {
  return L.icon({
    iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${color}.png`,
    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
    iconSize: [25,41],
    iconAnchor: [12,41]
  });
}

var icons = {
  sightseeing: icon("red"),
  museum: icon("violet"),
  food: icon("green"),
  nature: icon("blue"),
  daytrip: icon("orange"),
  activities: icon("yellow")
};

// Layers
var layers = {
  "üèõ Sightseeing": L.layerGroup(),
  "üñº Museums": L.layerGroup(),
  "üçΩ Food & Nightlife": L.layerGroup(),
  "üåø Nature & Views": L.layerGroup(),
  "üöó Day Trips": L.layerGroup(),
  "üé≤ Activities & Entertainment": L.layerGroup()
};

// Locations
var places = [
  // Sightseeing
  ["Skanderbeg Square",41.32833,19.81833,"Main city square","sightseeing"],
  ["Et'hem Bey Mosque",41.32781,19.81936,"Historic mosque","sightseeing"],
  ["Clock Tower",41.32780,19.81978,"Ottoman clock tower","sightseeing"],
  ["Pyramid of Tirana",41.32341,19.82125,"Iconic structure","sightseeing"],
  ["Tirana Castle",41.32639,19.82194,"Old fortress walls","sightseeing"],
  ["Resurrection Cathedral",41.32633,19.81709,"Orthodox cathedral","sightseeing"],
  ["Tanners' Bridge",41.3289,19.8215,"Ottoman bridge","sightseeing"],
  ["Sheshi N√´n√´ Tereza",41.3192,19.8200,"Mother Teresa Square","sightseeing"],
  ["Reja Art Installation",41.3245,19.8190,"Modern public art","sightseeing"],

  // Museums
  ["National Historical Museum",41.3279,19.8186,"History of Albania","museum"],
  ["Bunk'Art 2",41.32708,19.81955,"Communist bunker museum","museum"],
  ["Bunk'Art 1",41.351686,19.860733,"Huge bunker complex","museum"],
  ["House of Leaves",41.32347,19.8204,"Secret police museum","museum"],
  ["National Art Gallery",41.32546,19.82021,"Albanian art","museum"],
  ["National Archaeological Museum",41.3275,19.8150,"Ancient artifacts","museum"],
  ["Natural Sciences Museum",41.3267,19.8175,"Zoology, botany, geology","museum"],
  ["National Museum of Fine Arts",41.3256,19.8203,"Modern and traditional art","museum"],

  // Food & Nightlife
  ["Blloku District",41.32111,19.81694,"Bars & nightlife","food"],
  ["Pazari i Ri",41.32925,19.82521,"Market & restaurants","food"],
  ["Mullixhiu Restaurant",41.3229,19.8231,"Modern Albanian food","food"],
  ["Radio Bar",41.3214,19.8179,"Popular cocktail bar","food"],
  ["Komiteti Bar",41.3223,19.8185,"Traditional raki bar","food"],
  ["Colorwine",41.3220,19.8190,"Wine tasting bar","food"],
  ["Tea Room & Creperi",41.3230,19.8180,"Cafes & desserts","food"],

  // Nature
  ["Grand Park & Lake",41.311855,19.820967,"Walks & greenery","nature"],
  ["Botanical Garden",41.3157,19.8069,"Plants & calm","nature"],
  ["Dajti Ekspres Cable Car",41.37664,19.92117,"Mountain views","nature"],
  ["Mount Dajti Trails",41.3841,19.9228,"Hiking","nature"],

  // Day trips
  ["Kruj√´ Fortress",41.5078,19.795,"Skanderbeg city","daytrip"],
  ["Durr√´s Amphitheatre",41.324,19.441,"Roman ruins","daytrip"],
  ["Durr√´s Beach",41.316,19.45,"Sea & sunset","daytrip"],
  ["Berat (UNESCO)",40.7066,19.9526,"Historic city","daytrip"],
  ["Apollonia Ruins",40.72333,19.58333,"Ancient city","daytrip"],
  ["Cape of Rodon",41.5678,19.5900,"Scenic coastal area","daytrip"],

  // Activities & Entertainment
  ["Tirana Escape Room",41.3260,19.8185,"Live puzzle adventure","activities"],
  ["TEG Entertainment Complex",41.3280,19.8280,"Cinema, bowling, arcade","activities"],
  ["QTU Entertainment Complex",41.3300,19.8270,"Indoor games & cinema","activities"]
];

// Add markers
places.forEach(p => {
  var marker = L.marker([p[1],p[2]], {icon: icons[p[4]]})
    .bindPopup(`<b>${p[0]}</b><br>${p[3]}`);
  layers[
    p[4]=="sightseeing"?"üèõ Sightseeing":
    p[4]=="museum"?"üñº Museums":
    p[4]=="food"?"üçΩ Food & Nightlife":
    p[4]=="nature"?"üåø Nature & Views":
    p[4]=="daytrip"?"üöó Day Trips":
    "üé≤ Activities & Entertainment"
  ].addLayer(marker);
});

// Add layers to map
Object.values(layers).forEach(l => l.addTo(map));
L.control.layers(null, layers).addTo(map);

// Geolocation
var userMarker;
function locateUser() {
  navigator.geolocation.getCurrentPosition(pos => {
    var lat = pos.coords.latitude;
    var lon = pos.coords.longitude;
    if (userMarker) map.removeLayer(userMarker);
    userMarker = L.circleMarker([lat,lon], {
      radius: 8, color: "#007bff", fillOpacity: 0.8
    }).addTo(map).bindPopup("You are here").openPopup();
    map.setView([lat,lon],14);
  }, () => alert("Location access denied"));
}
</script>
</body>
</html>
